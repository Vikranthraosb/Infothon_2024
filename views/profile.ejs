<% include ./header.ejs %>
<link rel="stylesheet" href="stylesheets/style2.css">
<div class="profile w-full min-h-screen bg-gray-300 text-white pt-1">
    <form id="uploadform" hidden action="/fileupload" method="post" enctype="multipart/form-data">
        <input type="file" name="image">
        <button type="submit">Upload</button>
    </form>
    <div class="profders flex flex-col items-center mt-10">

        <div class="w-32 h-32 bg-green-500 rounded-full relative ">
<span class="edit h-8 w-8 rounded-full bg-red-700 absolute bottom-0 right-0" id="uploadicon"></span>
<img class="h-full w-full object-cover rounded-full "src="/images/uploads/<%= user.ProfileImage %>" alt="">
        </div>
        <h1 class="text-3xl font-semibold mt-5"><%= user.name%></h1>
        <h3 class="text-md">@<%= user.name%></h3>
        <a href="/edit" class="mt-5 px-7 py-2 bg-gray-800 rounded-full text-xs font-semibold text-white">edit</a>
        <a href="/add" class="mt-5 px-14 py-4 bg-orange-800 rounded-full text-xs font-semibold text-white">Add new Post</a>

    </div>
    <div class="cards flex flex-wrap gap-10 px-10 mt-10">
        <div class="card">
        <div class="w-32 h-24 bg-red-600 rounded-lg overflow-hidden">
            <img class="h-full w-full object-cover" src="/images/uploads/<%= user?.posts[0]?.image %>" alt="">
        </div>
        <a href="/show/posts" class="text-xl font-semibold mt-4">Your uploaded pins</aa>
        <h5 class="text-sm font-semibold mt-2 opacity-60"><%= user.posts.length %>Pins</h5>
    </div>
    </div> 
</div>
<script>
    document.querySelector("#uploadicon").addEventListener("click",function(){
        document.querySelector("#uploadform input").click()
    })
    document.querySelector("#uploadform input").addEventListener("change", function(){
        document.querySelector("#uploadform").submit();

    })

</script>
 


<% include ./footer.ejs %>